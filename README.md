# <p align="center">Website qu·∫£n l√Ω ƒë·∫∑t ph√≤ng kh√°ch s·∫°n Paradise Resort</p>

<br />

<p align="center"> <b><ins>B·∫°n c√≥ th·ªÉ xem th·ª≠ web t·∫°i ƒë√¢y</ins></b>: <a href="https://paradise-resort-bice.vercel.app/">Paradise Resort</a> üëà</p>

<br />

## <ins><p align="center">A. Th√¥ng tin m√¥n h·ªçc, gi·∫£ng vi√™n, th√†nh vi√™n nh√≥m</p></ins>

**- Gi·∫£ng vi√™n h∆∞·ªõng d·∫´n:** Tr·∫ßn Tu·∫•n D≈©ng

**- M√¥n h·ªçc:** L·∫≠p tr√¨nh ·ª©ng d·ª•ng Web - NT208.O23.ANTT

**- Nh√≥m 3:**

-  **Tr∆∞·ªüng nh√≥m:** L√™ Qu·ªëc Ng√¥ - 22520951 ([@lengo0951](https://github.com/lengo0951))

- Tr·∫ßn Ti·ªÖn Nh·∫≠t - 22521030 ([@tnh47](https://github.com/tnh47))

- Tr·∫ßn Anh Kh√¥i - 22520701 ([@anhkhoi312](https://github.com/anhkhoi312))

- Nguy·ªÖn H·ªì Nh·∫≠t Khoa - 22520677 ([@NKhoauit](https://github.com/NKhoauit))

- Nguy·ªÖn Tu·∫•n Ph√°t - 22521076 ([@Pest270904](https://github.com/Pest270904))

**- Video gi·ªõi thi·ªáu v·ªÅ framework backend NestJS:** [Youtube](https://youtu.be/-4oWuhSvy28?si=Uo2Ou3I4M9AucQ9l)

## <p align="center"><ins>B. M√¥ t·∫£ ƒë·ªÅ t√†i</ins></p>
### <ins>B.1 T·ªïng quan</ins>

- **T√™n ƒë·ªÅ t√†i**: Website qu·∫£n l√Ω ƒë·∫∑t ph√≤ng kh√°ch s·∫°n Paradise Resort.

- M·ªôt trang web kh√°ch s·∫°n cung c·∫•p nh·ªØng ch·ª©c nƒÉng c∆° b·∫£n: ƒëƒÉng k√Ω/ƒëƒÉng nh·∫≠p, hi·ªÉn th·ªã danh s√°ch ph√≤ng, ƒë·∫∑t ph√≤ng, thanh to√°n, c∆° s·ªü v·∫≠t ch·∫•t, chat,...

- **Admin:** gi·ªõi thi·ªáu ph√≤ng, qu·∫£n l√Ω account ng∆∞·ªùi d√πng, qu·∫£n l√Ω ph√≤ng, qu·∫£n l√Ω c√°c ƒë∆°n ƒë·∫∑t ph√≤ng, chat v·ªõi t·ª´ng user,...

- **Ng∆∞·ªùi d√πng:** thay ƒë·ªïi th√¥ng tin c√° nh√¢n, ƒë·∫∑t ph√≤ng, chat, thanh to√°n tr·ª±c tuy·∫øn, ƒë√°nh gi√°, review,...

<br>

<p align="center"><ins>Mindmap</p></ins>

![](https://i.postimg.cc/FzQyq0gh/B-n-t-duy-l-m-t-s-t-ch-c-th-ng-tin-m-t-c-ch-tr-c-quan-N-cho-th-y-m-i-quan-h-gi-a-c-c-ph.jpg)

<br />

<p align="center"><ins>Database Diagram</ins></p>

![](https://i.postimg.cc/Dyvfg8ks/aaaa.webp)

<br />

### <ins>B.2 T√≠nh nƒÉng</ins>
- **User**:
	-  ƒêƒÉng k√Ω/ ƒêƒÉng nh·∫≠p tr√™n website.
	- Xem danh s√°ch ph√≤ng, c∆° s·ªü v·∫≠t ch·∫•t c·ªßa kh√°ch s·∫°n.
	-  Chat v·ªõi admin.
	- ƒê·∫∑t ph√≤ng, thanh to√°n tr·ª±c tuy·∫øn.
	- ƒê√°nh gi√° ch·∫•t l∆∞·ª£ng d·ªãch v·ª• c·ªßa kh√°ch s·∫°n.

- **Admin**:
	- Xem t·ªïng doanh thu, s·ªë kh√°ch h√†ng, s·ªë ƒë√°nh gi√° c·ªßa kh√°ch h√†ng.
	- Xem t·ªïng s·ªë ph√≤ng v√† s·ªë l∆∞·ª£ng ph√≤ng c√≤n tr·ªëng.
	- Chat v·ªõi kh√°ch h√†ng.
	- Qu·∫£n l√Ω danh s√°ch th√¥ng tin c·ªßa kh√°ch h√†ng ƒë√£ ƒëƒÉng k√Ω t√†i kho·∫£n tr√™n website.
	- Qu·∫£n l√Ω s·ªë l∆∞·ª£ng ƒë∆°n ƒë·∫∑t ph√≤ng, tr·∫°ng th√°i c·ªßa ƒë∆°n ƒë·∫∑t ph√≤ng.
	- H·ªßy ƒë∆°n ƒë·∫∑t ph√≤ng.
  
- **T√≠nh nƒÉng n√¢ng cao:** Thanh to√°n b·∫±ng VNPay

<br />

### <ins>B.3 C√¥ng ngh·ªá s·ª≠ d·ª•ng</ins>

- **Frontend:**  HTML, CSS, JS, render page b·∫±ng [Express-handlebars](https://www.npmjs.com/package/express-handlebars)

- **Backend:** [Nest.js](https://nestjs.com/) - TypeScript

- **Database:** PostgreSQL h·ªó tr·ª£ b·∫±ng Docker v√† [Prisma](https://www.prisma.io/)

<br />

### <ins>B.4 C√°c package dependencies ch√≠nh: </ins>

- **nestjs packages**: c√°c packages c∆° b·∫£n c·ªßa nestjs
- **prisma**: ƒë∆°n gi·∫£n vi·ªác x√¢y d·ª±ng database
- **express-handlebars:** h·ªó tr·ª£ render c√°c file html
- **argon2**: hash password
- **nestjs-jwt** & **passport-jwt**: t·∫°o v√† verify jwt token cho user
- **socket.io**: chat realtime
- **cookie-parser**: l·∫•y cookie t·ª´ request

<br />

### <ins>B.5 Google page speed:</ins>
![](https://i.ibb.co/jv4sTRn/page-Speed.webp)

<br />

## <ins><p align="center">C. Setup v√† Build</p></ins>

### <ins>C.1 Y√™u c·∫ßu:</ins>

1. H·ªá ƒëi·ªÅu h√†nh: Window, Linux, MacOS

2. Runtime enviroment for [Nodejs](https://nodejs.org/en)

3. (**Optional**) [Docker](https://www.docker.com/) ƒë·ªÉ l∆∞u database ·ªü local 

<br />

### <ins>C.2 Setup</ins>

- Git clone

```console

	$ git clone https://github.com/Pest270904/Paradise-Resort.git

```

- Change Directory

```console

	$ cd .\Paradise-Resort\

```

- Dowload package needed for the project

```console

	$ npm i

```
- Change some codes in ``/src/main.ts`` to be able to compile code locally:
<br />

![](https://i.postimg.cc/pLJPnjL3/a.png)

- **<ins>(Optional when you want to use your own database on server)</ins>** Go to file ``/.env``  then replace the default docker's path of ``DATABASE_URL`` to your own database url, for example:
<br />

![](https://i.postimg.cc/PJJBNLRs/docker.png)

- Set up database

```console

		------ Start Postgres in Docker and push migrations to database  ------
		(Run this command to clear db in docker or start a new docker to store db)

	$ npm run db:dev:restart

		---------------------------- FOR DEV ----------------------------
		    (Run these commands when you change the code in databases)

	$ npx prisma migrate dev

	$ npx prisma generate

```

- Compile and build

```console

	$ npm run start

		------ Or ------

	$ npm run start:dev (start api in dev mode)

```
- Go to url: http://localhost:3000/ to preview the website

<br />

## <ins><p align="center">D. Testing</p></ins>

- To preview the database :
``` console
		------ To preview data in database ------
	      (Run in a new terminal in the main directory)

	$ npx prisma studio
```

- **(!)** Make sure go to route ``/admin/create`` to create admin account first when deploy database.

- **Test account for payment**

<div align="center">

| Ng√¢n h√†ng  	  | NCB   				 |
| :--------: 	  | :---: 			     |
| S·ªë th·∫ª  		  | 9704198526191432198  |
| T√™n ch·ªß th·∫ª	  | NGUYEN VAN A 		 |
| Ng√†y ph√°t h√†nh  | 07/15 				 |
| M·∫≠t kh·∫©u OTP    | 123456				 |

</div>

## <ins><p align="center">E. C√¢u h·ªèi</p></ins>
### <ins>C√¢u 1: NestJS c√≥ ∆∞u ƒëi·ªÉm g√¨, v√† NestJS c√≥ ph·ªï bi·∫øn kh√¥ng ? NestJS c√≥ ∆∞u ƒëi·ªÉm g√¨ so v·ªõi ti·ªÅn th√¢n Angular?<ins>
- NestJS l√† m·ªôt framework ph√°t tri·ªÉn ·ª©ng d·ª•ng backend d·ª±a tr√™n Node.js v√† TypeScript, n·ªïi b·∫≠t v·ªõi nhi·ªÅu ∆∞u ƒëi·ªÉm v√† ƒëang ng√†y c√†ng tr·ªü n√™n ph·ªï bi·∫øn trong c·ªông ƒë·ªìng ph√°t tri·ªÉn ph·∫ßn m·ªÅm.

**<ins>1.1 ∆Øu ƒëi·ªÉm c·ªßa NestJS<ins>**
+ **Ki·∫øn tr√∫c m√¥-ƒëun:** NestJS cho ph√©p ph√°t tri·ªÉn ·ª©ng d·ª•ng theo ki·∫øn tr√∫c m√¥-ƒëun, gi√∫p d·ªÖ d√†ng qu·∫£n l√Ω v√† m·ªü r·ªông. M·ªói module c√≥ th·ªÉ ƒë∆∞·ª£c ph√°t tri·ªÉn v√† ki·ªÉm th·ª≠ ƒë·ªôc l·∫≠p, sau ƒë√≥ k·∫øt h·ª£p l·∫°i th√†nh m·ªôt ·ª©ng d·ª•ng ho√†n ch·ªânh.
+ **H·ªó tr·ª£ TypeScript:** NestJS ƒë∆∞·ª£c vi·∫øt ho√†n to√†n b·∫±ng TypeScript, cung c·∫•p c√°c t√≠nh nƒÉng nh∆∞ ki·ªÉm tra ki·ªÉu tƒ©nh, h·ªó tr·ª£ hi·ªán ƒë·∫°i v√† t√≠ch h·ª£p t·ªët v·ªõi c√°c c√¥ng c·ª• TypeScript kh√°c, gi√∫p tƒÉng nƒÉng su·∫•t v√† ch·∫•t l∆∞·ª£ng m√£ ngu·ªìn.
+ **T√≠ch h·ª£p d·ªÖ d√†ng v·ªõi c√°c th∆∞ vi·ªán kh√°c:** NestJS t√≠ch h·ª£p t·ªët v·ªõi c√°c th∆∞ vi·ªán v√† framework c·ªßa Node.js nh∆∞ Express, Fastify, Mongoose, TypeORM, v√† nhi·ªÅu th∆∞ vi·ªán kh√°c, gi√∫p d·ªÖ d√†ng m·ªü r·ªông v√† t√πy ch·ªânh ·ª©ng d·ª•ng.
+ **T√≠nh m·ªü r·ªông v√† t√°i s·ª≠ d·ª•ng:** V·ªõi vi·ªác h·ªó tr·ª£ Dependency Injection (DI), NestJS cho ph√©p t√°i s·ª≠ d·ª•ng m√£ ngu·ªìn v√† d·ªÖ d√†ng m·ªü r·ªông ·ª©ng d·ª•ng. DI gi√∫p qu·∫£n l√Ω c√°c ph·ª• thu·ªôc m·ªôt c√°ch hi·ªáu qu·∫£ v√† gi·∫£m s·ª± ph·ª• thu·ªôc ch·∫∑t ch·∫Ω gi·ªØa c√°c th√†nh ph·∫ßn.
+ **H·ªó tr·ª£ t√≠ch h·ª£p testing:** NestJS cung c·∫•p c√°c c√¥ng c·ª• t√≠ch h·ª£p s·∫µn cho vi·ªác vi·∫øt unit test v√† e2e test, gi√∫p ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng m√£ ngu·ªìn v√† ph√°t hi·ªán s·ªõm c√°c l·ªói trong qu√° tr√¨nh ph√°t tri·ªÉn.
+ **C·ªông ƒë·ªìng v√† t√†i li·ªáu phong ph√∫:**: NestJS c√≥ c·ªông ƒë·ªìng ph√°t tri·ªÉn l·ªõn v√† t√†i li·ªáu phong ph√∫, bao g·ªìm c·∫£ c√°c t√†i li·ªáu ch√≠nh th·ª©c v√† c√°c t√†i li·ªáu t·ª´ c·ªông ƒë·ªìng, gi√∫p l·∫≠p tr√¨nh vi√™n d·ªÖ d√†ng h·ªçc t·∫≠p v√† gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ g·∫∑p ph·∫£i.

**<ins>1.2 ƒê·ªô ph·ªï bi·∫øn c·ªßa NestJS<ins>**
+ NestJS ƒëang ng√†y c√†ng tr·ªü n√™n ph·ªï bi·∫øn trong c·ªông ƒë·ªìng ph√°t tri·ªÉn ph·∫ßn m·ªÅm, ƒë·∫∑c bi·ªát l√† trong c√°c d·ª± √°n c·∫ßn x√¢y d·ª±ng ·ª©ng d·ª•ng backend. S·ª± ph·ªï bi·∫øn c·ªßa NestJS ƒë∆∞·ª£c th·ªÉ hi·ªán qua:
+ D·ª± √°n NestJS tr√™n GitHub c√≥ s·ªë l∆∞·ª£ng sao (stars) l·ªõn, cho th·∫•y s·ª± quan t√¢m v√† s·ª≠ d·ª•ng r·ªông r√£i t·ª´ c·ªông ƒë·ªìng.
+ C·ªông ƒë·ªìng ph√°t tri·ªÉn c·ªßa NestJS tr√™n c√°c n·ªÅn t·∫£ng nh∆∞ Stack Overflow, Reddit, v√† c√°c di·ªÖn ƒë√†n l·∫≠p tr√¨nh kh√°c ƒëang ng√†y c√†ng l·ªõn m·∫°nh, v·ªõi nhi·ªÅu b√†i vi·∫øt, th·∫£o lu·∫≠n, v√† gi·∫£i ƒë√°p v·∫•n ƒë·ªÅ.
+ C√≥ nhi·ªÅu t√†i li·ªáu, b√†i vi·∫øt blog, video h∆∞·ªõng d·∫´n, v√† kh√≥a h·ªçc tr·ª±c tuy·∫øn v·ªÅ NestJS, t·ª´ c∆° b·∫£n ƒë·∫øn n√¢ng cao, gi√∫p l·∫≠p tr√¨nh vi√™n d·ªÖ d√†ng ti·∫øp c·∫≠n v√† h·ªçc t·∫≠p.
+ Nhi·ªÅu c√¥ng ty v√† d·ª± √°n l·ªõn ƒë√£ v√† ƒëang s·ª≠ d·ª•ng NestJS cho c√°c ·ª©ng d·ª•ng backend c·ªßa h·ªç, cho th·∫•y s·ª± tin t∆∞·ªüng v√†o kh·∫£ nƒÉng v√† hi·ªáu su·∫•t c·ªßa framework n√†y.

**<ins>1.3 So s√°nh v·ªÅ ∆∞u ƒëi·ªÉm c·ªßa NestJS so v·ªõi Angular<ins>**
+ **1.3.1 Thi·∫øt k·∫ø cho Backend:**
	- NestJS: ƒê∆∞·ª£c thi·∫øt k·∫ø ƒë·∫∑c bi·ªát cho vi·ªác ph√°t tri·ªÉn ·ª©ng d·ª•ng backend, v·ªõi tr·ªçng t√¢m l√† x√¢y d·ª±ng API RESTful, GraphQL, v√† microservices.
	- Angular: L√† framework frontend d√πng ƒë·ªÉ x√¢y d·ª±ng c√°c ·ª©ng d·ª•ng web t∆∞∆°ng t√°c ph√≠a ng∆∞·ªùi d√πng.

+ **1.3.2 Dependency Injection (DI) m·∫°nh m·∫Ω:** NestJS √°p d·ª•ng m√¥ h√¨nh Dependency Injection t∆∞∆°ng t·ª± nh∆∞ Angular, nh∆∞ng t·ªëi ∆∞u h√≥a cho m√¥i tr∆∞·ªùng backend. DI trong NestJS gi√∫p qu·∫£n l√Ω c√°c d·ªãch v·ª• v√† m√¥-ƒëun d·ªÖ d√†ng, n√¢ng cao kh·∫£ nƒÉng t√°i s·ª≠ d·ª•ng v√† b·∫£o tr√¨ m√£ ngu·ªìn.

+ **1.3.3. Ki·∫øn tr√∫c m√¥-ƒëun:** C·∫£ hai framework ƒë·ªÅu h·ªó tr·ª£ ki·∫øn tr√∫c m√¥-ƒëun, nh∆∞ng NestJS ·ª©ng d·ª•ng m√¥-ƒëun h√≥a ·ªü c·∫•p ƒë·ªô backend. ƒêi·ªÅu n√†y gi√∫p d·ªÖ d√†ng qu·∫£n l√Ω v√† m·ªü r·ªông c√°c th√†nh ph·∫ßn c·ªßa ·ª©ng d·ª•ng backend.

+ **1.3.4 H·ªó tr·ª£ cho Microservices:**
	- NestJS: C√≥ s·∫µn c√°c c√¥ng c·ª• v√† th∆∞ vi·ªán h·ªó tr·ª£ ph√°t tri·ªÉn microservices, nh∆∞ t√≠ch h·ª£p v·ªõi RabbitMQ, Kafka, v√† gRPC. ƒêi·ªÅu n√†y gi√∫p x√¢y d·ª±ng c√°c h·ªá th·ªëng ph√¢n t√°n v√† kh·∫£ nƒÉng m·ªü r·ªông cao.
	- Angular: Kh√¥ng ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ h·ªó tr·ª£ tr·ª±c ti·∫øp microservices v√¨ n√≥ ch·ªß y·∫øu t·∫≠p trung v√†o giao di·ªán ng∆∞·ªùi d√πng.

+ **1.3.5 T√≠ch h·ª£p v·ªõi c∆° s·ªü d·ªØ li·ªáu:** NestJS t√≠ch h·ª£p d·ªÖ d√†ng v·ªõi nhi·ªÅu ORM v√† ODM nh∆∞ TypeORM, Sequelize, v√† Mongoose, gi√∫p qu·∫£n l√Ω k·∫øt n·ªëi v√† t∆∞∆°ng t√°c v·ªõi c∆° s·ªü d·ªØ li·ªáu hi·ªáu qu·∫£. Angular kh√¥ng c√≥ t√≠nh nƒÉng n√†y v√¨ n√≥ kh√¥ng li√™n quan ƒë·∫øn backend.

+ **1.3.6 T√≠nh m·ªü r·ªông v√† t√πy ch·ªânh cao:** NestJS cung c·∫•p c√°c c∆° ch·∫ø linh ho·∫°t ƒë·ªÉ m·ªü r·ªông v√† t√πy ch·ªânh ·ª©ng d·ª•ng backend th√¥ng qua middleware, guards, interceptors, v√† filters. Nh·ªØng t√≠nh nƒÉng n√†y gi√∫p x√¢y d·ª±ng c√°c logic ph·ª©c t·∫°p v√† b·∫£o m·∫≠t.

+ **1.3.7 T√≥m t·∫Øt:**
	- **NestJS**: T·∫≠p trung v√†o backend, cung c·∫•p c√°c c√¥ng c·ª• v√† t√≠nh nƒÉng m·∫°nh m·∫Ω ƒë·ªÉ ph√°t tri·ªÉn API, microservices, v√† qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu. N√≥ th·ª´a h∆∞·ªüng nhi·ªÅu nguy√™n t·∫Øc thi·∫øt k·∫ø t·ª´ Angular nh∆∞ng t·ªëi ∆∞u h√≥a cho m√¥i tr∆∞·ªùng server-side.
	- **Angular**: T·∫≠p trung v√†o frontend, gi√∫p x√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng phong ph√∫ v√† t∆∞∆°ng t√°c. N√≥ ph√π h·ª£p cho vi·ªác ph√°t tri·ªÉn c√°c ·ª©ng d·ª•ng web ƒë∆°n trang (SPA) v√† cung c·∫•p c√°c c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÉ qu·∫£n l√Ω tr·∫°ng th√°i giao di·ªán v√† t∆∞∆°ng t√°c ng∆∞·ªùi d√πng.

### <ins>C√¢u 2: NestJS c√≥ g√¨ n·ªïi b·∫≠t h∆°n c√°c framework kh√°c? L√†m th·∫ø n√†o ƒë·ªÉ t√≠ch h·ª£p v√† s·ª≠ d·ª•ng WebSocker ƒë·ªÉ t·∫°o c√°c ·ª©ng d·ª•ng realtime.<ins>

**<ins>2.1 ƒê·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t c·ªßa NestJS<ins>**
+ **Ki·∫øn tr√∫c m√¥-ƒëun:** NestJS cho ph√©p ph√°t tri·ªÉn ·ª©ng d·ª•ng theo ki·∫øn tr√∫c m√¥-ƒëun, gi√∫p m√£ ngu·ªìn d·ªÖ qu·∫£n l√Ω, m·ªü r·ªông v√† b·∫£o tr√¨. M·ªói module c√≥ th·ªÉ ƒë∆∞·ª£c ph√°t tri·ªÉn v√† ki·ªÉm th·ª≠ ƒë·ªôc l·∫≠p.
+ **S·ª≠ d·ª•ng TypeScript:** NestJS ƒë∆∞·ª£c x√¢y d·ª±ng ho√†n to√†n tr√™n TypeScript, mang l·∫°i c√°c l·ª£i √≠ch v·ªÅ ki·ªÉm tra ki·ªÉu tƒ©nh, h·ªó tr·ª£ IDE t·ªët h∆°n, v√† gi·∫£m thi·ªÉu l·ªói khi l·∫≠p tr√¨nh.
+ **H·ªó tr·ª£ Dependency Injection (DI):** NestJS t√≠ch h·ª£p s·∫µn c∆° ch·∫ø DI m·∫°nh m·∫Ω, gi√∫p qu·∫£n l√Ω c√°c d·ªãch v·ª• v√† ph·ª• thu·ªôc d·ªÖ d√†ng, tƒÉng kh·∫£ nƒÉng t√°i s·ª≠ d·ª•ng v√† m·ªü r·ªông m√£ ngu·ªìn.
+ **T√≠ch h·ª£p t·ªët v·ªõi c√°c th∆∞ vi·ªán v√† framework kh√°c:** NestJS h·ªó tr·ª£ t√≠ch h·ª£p d·ªÖ d√†ng v·ªõi c√°c th∆∞ vi·ªán v√† framework c·ªßa Node.js nh∆∞ Express, Fastify, TypeORM, Mongoose, v√† nhi·ªÅu h∆°n n·ªØa.
+ **H·ªó tr·ª£ m·∫°nh m·∫Ω cho c√°c k·ªπ thu·∫≠t v√† m√¥ h√¨nh ph√°t tri·ªÉn hi·ªán ƒë·∫°i:** NestJS h·ªó tr·ª£ x√¢y d·ª±ng c√°c ·ª©ng d·ª•ng microservices, c√°c m√¥ h√¨nh event-driven, v√† c√°c h·ªá th·ªëng ph√¢n t√°n. N√≥ c≈©ng t√≠ch h·ª£p t·ªët v·ªõi c√°c c√¥ng ngh·ªá nh∆∞ GraphQL, WebSocket, v√† CQRS.
+ **D·ªÖ d√†ng vi·∫øt unit test v√† e2e test:** NestJS cung c·∫•p c√°c c√¥ng c·ª• t√≠ch h·ª£p s·∫µn cho vi·ªác vi·∫øt v√† ch·∫°y unit test v√† e2e test, gi√∫p ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng m√£ ngu·ªìn v√† ph√°t hi·ªán l·ªói s·ªõm.

**<ins>2.2 T√≠ch h·ª£p v√† s·ª≠ d·ª•ng WebSocker ƒë·ªÉ t·∫°o c√°c ·ª©ng d·ª•ng realtime<ins>**
- NestJS c√≥ h·ªó tr·ª£ t√≠ch h·ª£p WebSocket m·ªôt c√°ch d·ªÖ d√†ng th√¥ng qua @nestjs/websockets package
- C√°c b∆∞·ªõc th·ª±c hi·ªán (demo) 
	-**B∆∞·ªõc 1**: T·∫£i package WebSocket
	```console
	npm install --save @nestjs/websockets @nestjs/platform-socket.io	
	```
	- **B∆∞·ªõc 2:** T·∫°o m·ªôt Gateway WebSocket
	``` js
	import { WebSocketGateway, WebSocketServer, SubscribeMessage, MessageBody } from '@nestjs/websockets';
	import { Server, Socket } from 'socket.io';

	@WebSocketGateway()
	export class ChatGateway {
		@WebSocketServer()
		server: Server;

		@SubscribeMessage('message')
		handleMessage(@MessageBody() message: string, client: Socket): void {
			this.server.emit('message', message);
		}
	}
	```
	- **B∆∞·ªõc 3:** ƒêƒÉng k√≠ chat.gateway.js v√†o module ch√≠nh(m·∫∑c ƒë·ªãnh l√† app.module.ts)
	- **B∆∞·ªõc 4:** Vi·∫øt code HTML v√† JavaScript
	``` html
	<script>
		const socket = io('http://localhost:3000')

		socket.on('connect', () => {
			console.log('Connected to server')
		})

		socket.on('message', () => {
			console.log('Message from server', data)
		})

		function sendMessage() {
			const message = document.getElementById('messageInput').value
			socket.emit('message', message)
		}
	</script>	
	```

### <ins>C√¢u 3: Authomodule c·ªßa NestJS v·∫≠n h√†nh nh∆∞ th·∫ø n√†o. N√≥ c√≥ c√¥ng c·ª• g√¨, hay n√≥ l√† c√¥ng c·ª•. T·∫°i sao d√πng NestJS thay v√¨ ExpressJS?<ins>

**<ins>3.1 AuthModule, th∆∞ vi√™n, c√¥ng c·ª• x√¢y d·ª•ng AuthModule<ins>**
- AuthModule trong NestJS th·ª±c ch·∫•t kh√¥ng ph·∫£i l√† m·ªôt c√¥ng c·ª• c·ª• th·ªÉ m√† l√† m·ªôt module c√≥ th·ªÉ b·∫°n t·∫°o ra ƒë·ªÉ x·ª≠ l√Ω x√°c th·ª±c v√† ph√¢n quy·ªÅn ng∆∞·ªùi d√πng. NestJS cung c·∫•p c√°c c√¥ng c·ª• v√† th∆∞ vi·ªán t√≠ch h·ª£p s·∫µn ƒë·ªÉ h·ªó tr·ª£ vi·ªác x√¢y d·ª±ng module n√†y m·ªôt c√°ch d·ªÖ d√†ng v√† hi·ªáu qu·∫£. 
- C√¥ng c·ª• v√† Th∆∞ vi·ªán Ch√≠nh ƒë·ªÉ X√¢y d·ª±ng AuthModule:
	- Passport.js:
		- Passport l√† m·ªôt middleware x√°c th·ª±c cho Node.js, h·ªó tr·ª£ nhi·ªÅu chi·∫øn l∆∞·ª£c x√°c th·ª±c kh√°c nhau nh∆∞ JWT, OAuth, Local, v.v.
		- NestJS cung c·∫•p g√≥i @nestjs/passport ƒë·ªÉ t√≠ch h·ª£p Passport.js m·ªôt c√°ch d·ªÖ d√†ng.
	- JWT (JSON Web Tokens):
		- JWT ƒë∆∞·ª£c s·ª≠ d·ª•ng ph·ªï bi·∫øn ƒë·ªÉ t·∫°o token x√°c th·ª±c v√† ph√¢n quy·ªÅn.
		- NestJS cung c·∫•p g√≥i @nestjs/jwt ƒë·ªÉ d·ªÖ d√†ng t√≠ch h·ª£p JWT v√†o AuthModule c·ªßa b·∫°n.

**<ins>3.2 C·∫•u Tr√∫c AuthModule v√† C√°c Th√†nh Ph·∫ßn Ch√≠nh<ins>**
- **AuthModule:** L√† module ch·ª©a c√°c th√†nh ph·∫ßn li√™n quan ƒë·∫øn x√°c th·ª±c nh∆∞ AuthService, AuthController, v√† c√°c chi·∫øn l∆∞·ª£c x√°c th·ª±c.
- **AuthService:** Ch·ª©a c√°c logic x√°c th·ª±c v√† t·∫°o token.
- **AuthController:** X·ª≠ l√Ω c√°c y√™u c·∫ßu HTTP li√™n quan ƒë·∫øn x√°c th·ª±c nh∆∞ ƒëƒÉng nh·∫≠p, ƒëƒÉng k√Ω.
- **Guards:** D√πng ƒë·ªÉ b·∫£o v·ªá c√°c route ch·ªâ cho ph√©p truy c·∫≠p khi ng∆∞·ªùi d√πng ƒë√£ x√°c th·ª±c ho·∫∑c c√≥ quy·ªÅn h·∫°n ph√π h·ª£p.
- **Decorators:** D√πng ƒë·ªÉ g·∫Øn th√¥ng tin x√°c th·ª±c v√†o c√°c route handler m·ªôt c√°ch r√µ r√†ng v√† d·ªÖ qu·∫£n l√Ω.

**<ins>3.3 C√°ch v·∫≠n h√†nh Authomodule c·ªßa NestJS<ins>**
<p align="center"><ins>auth.module.ts</ins></p>

![](https://i.postimg.cc/1t94RQzY/Screenshot-2024-06-12-161557.png)

<br />

<p align="center"><ins>auth.controller.ts</ins></p>

![](https://i.postimg.cc/65D32R3Z/Screenshot-2024-06-12-161629.png)

<br />

<p align="center"><ins>auth.service.ts</ins></p>

![](https://i.postimg.cc/rFtykmJw/Screenshot-2024-06-12-161706.png)

**<ins>3.4 T·∫°i sao d√πng NestJS thay v√¨ ExpressJS<ins>**
- **Ki·∫øn tr√∫c m√¥-ƒëun:** NestJS gi√∫p t·ªï ch·ª©c m√£ ngu·ªìn theo ki·∫øn tr√∫c m√¥-ƒëun, gi√∫p qu·∫£n l√Ω v√† b·∫£o tr√¨ d·ªÖ d√†ng h∆°n, ƒë·∫∑c bi·ªát trong c√°c ·ª©ng d·ª•ng l·ªõn.
- **S·ª≠ d·ª•ng TypeScript:** NestJS t·∫≠n d·ª•ng s·ª©c m·∫°nh c·ªßa TypeScript, cung c·∫•p t√≠nh nƒÉng ki·ªÉm tra ki·ªÉu tƒ©nh v√† h·ªó tr·ª£ ph√°t tri·ªÉn m√£ ngu·ªìn an to√†n v√† hi·ªáu qu·∫£ h∆°n.
- **Dependency Injection (DI):** NestJS t√≠ch h·ª£p s·∫µn DI, gi√∫p qu·∫£n l√Ω c√°c ph·ª• thu·ªôc v√† c·∫£i thi·ªán kh·∫£ nƒÉng t√°i s·ª≠ d·ª•ng v√† b·∫£o tr√¨ m√£ ngu·ªìn.	
- **T√≠ch h·ª£p d·ªÖ d√†ng v·ªõi c√°c th∆∞ vi·ªán ph·ªï bi·∫øn:** NestJS t√≠ch h·ª£p t·ªët v·ªõi c√°c th∆∞ vi·ªán v√† c√¥ng c·ª• ph·ªï bi·∫øn nh∆∞ TypeORM, Mongoose, Passport.js, GraphQL, v√† c√°c th∆∞ vi·ªán kh√°c.
- **T√≠ch h·ª£p s·∫µn c√°c c√¥ng c·ª• v√† t√≠nh nƒÉng hi·ªán ƒë·∫°i:** NestJS h·ªó tr·ª£ c√°c t√≠nh nƒÉng hi·ªán ƒë·∫°i nh∆∞ microservices, event-driven architecture, WebSockets, v√† CQRS, gi√∫p x√¢y d·ª±ng c√°c ·ª©ng d·ª•ng ph·ª©c t·∫°p v√† hi·ªán ƒë·∫°i m·ªôt c√°ch d·ªÖ d√†ng.
- **H·ªó tr·ª£ m·∫°nh m·∫Ω cho testing:** NestJS cung c·∫•p c√°c c√¥ng c·ª• t√≠ch h·ª£p s·∫µn cho vi·ªác vi·∫øt unit test v√† e2e test, gi√∫p ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng m√£ ngu·ªìn.

### <ins>C√¢u 4: X·ª≠ l√≠ x√°c th·ª±c v√† ·ªßy quy·ªÅn ng∆∞·ªùi d√πng trong NestJS b·∫±ng c√°ch n√†o?<ins>
- X·ª≠ l√Ω x√°c th·ª±c v√† ·ªßy quy·ªÅn ng∆∞·ªùi d√πng trong NestJS bao g·ªìm vi·ªác x√°c minh danh t√≠nh ng∆∞·ªùi d√πng (x√°c th·ª±c) v√† ƒë·∫£m b·∫£o ng∆∞·ªùi d√πng c√≥ quy·ªÅn th·ª±c hi·ªán c√°c h√†nh ƒë·ªông nh·∫•t ƒë·ªãnh (·ªßy quy·ªÅn). NestJS cung c·∫•p c√°c c√¥ng c·ª• m·∫°nh m·∫Ω v√† t√≠ch h·ª£p d·ªÖ d√†ng v·ªõi c√°c th∆∞ vi·ªán ph·ªï bi·∫øn nh∆∞ Passport.js v√† JWT ƒë·ªÉ th·ª±c hi·ªán c√°c t√°c v·ª• n√†y.
- C√°c b∆∞·ªõc th·ª±c hi·ªán: 
	+ T·∫°o AuthModule, AuthService, v√† AuthController( v√≠ d·ª• ·ªü c√¢u 3 )
	+ T√≠ch h·ª£p Passport.js v√† JWT
	+ S·ª≠ d·ª•ng Guards v√† Decorators cho ·ªßy quy·ªÅn
- ·ªû v√≠ d·ª• b√™n d∆∞·ªõi s·∫Ω d√πng Guards ƒë·ªÉ ·ªßy quy·ªÅn cho ng∆∞·ªùi d√πng n√†o l√† admin v√† ph·∫£i ƒëƒÉng nh·∫≠p v√†o t√†i kho·∫£n admin m·ªõi truy c·∫≠p ƒë∆∞·ª£c ƒë·∫øn trang ƒë√≥ 

<br />

- **V√≠ d·ª• v·ªÅ s·ª≠ d·ª•ng Guards trong admin.controller.ts**:
<p align="center"><ins>admin.guard.ts</ins></p>

![](https://i.postimg.cc/LXXR065R/Screenshot-2024-06-12-161742.png)

<br />

<p align="center"><ins>admin.controller.ts</ins></p>

![](https://i.postimg.cc/8Ph5vcrn/Screenshot-2024-06-12-161813.png)